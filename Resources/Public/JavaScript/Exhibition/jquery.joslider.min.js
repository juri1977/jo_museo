!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){function s(s,l){var n=this;this.element=e(s),this.element.uniqueId(),this.sets=e.extend({},t,l,i),this.init=function(){e(n.sets.selLi).length>0&&n.element.find(n.sets.selLi).length>1&&(n.buildSlider(),n.setLowerHeightForMobile(),n.buildMirrored(),n.lookForActive(),n.imgLoad(n.element.find("img"),n.sliderUpdate),null!=n.sets.elBlUl&&n.sets.elBlUl.length>0&&(n.sets.elBlUl.find(n.sets.btnsBl).unbind("click",n.slideToPrStage),n.sets.elBlUl.find(n.sets.btnsBl).bind("click",n.slideToPrStage)),n.sets.ulPos=parseInt(n.sets.elUl.css("left")),n.sets.autoSlider&&n.startAutoSlider(),n.element.find(".joSliderButtons").unbind("click",n.slidePrStage),n.element.find(".joSliderButtons").bind("click",n.slidePrStage),n.sets.window.bind("DOMMouseScroll",n.isScrolling),n.sets.window.scroll(n.isScrolling),n.sets.window.unbind("resize",n.windowResize),n.sets.window.bind("resize",n.windowResize)),"function"==typeof n.sets.fnInit&&n.sets.fnInit()},this.buildSlider=function(){n.element.css("position","relative"),n.element.find(n.sets.selUl).length>0&&(n.sets.elUl=n.element.find(n.sets.selUl)),e(n.sets.selLi).length>0&&(n.sets.elLi=n.element.find(n.sets.selLi)),n.element.find(n.sets.selVp).length>0?n.sets.elVp=n.element.find(n.sets.selVp):(n.sets.selVp=".viewport",n.sets.elUl.wrap("<div class='viewport'></div>"),n.sets.elVp=n.element.find(n.sets.selVp)),n.sets.elVp.after('<div class="joSliderButtonsWrap"></div>'),n.element.find(n.sets.selBtnP).length>0?n.sets.elBtnP=n.element.find(n.sets.selBtnP):(n.sets.selBtnP=".joSliderButtons.prev",n.element.find(".joSliderButtonsWrap").append('<a href="#" class="joSliderButtons prev"></a>'),n.sets.elBtnP=n.element.find(n.sets.selBtnP)),n.element.find(n.sets.selBtnN).length>0?n.sets.elBtnN=n.element.find(n.sets.selBtnN):(n.sets.selBtnN=".joSliderButtons.next",n.element.find(".joSliderButtonsWrap").append('<a href="#" class="joSliderButtons next"></a>'),n.sets.elBtnN=n.element.find(n.sets.selBtnN)),n.sets.selBl&&(e(n.sets.selBlUl).length>0?n.sets.elBlUl=e(n.sets.selBlUl):(n.sets.selBlUl="ul.slideshow.bullets",n.sets.elBtnN.after('<div class="bullets-wrap"><ul class="slideshow bullets joClearfix"></ul></div>'),n.sets.elBlUl=n.element.find(n.sets.selBlUl),e.each(n.sets.elLi,function(e,s){n.sets.elBlUl.append('<li><a href="#" class="bullet" data-slide="'+e+'"></a></li>')}),n.sets.elBlUl.find("li").first().find("a").addClass("active")))},this.setLowerHeightForMobile=function(){if(0!=n.sets.setLowerHeightForMobile){var s=n.sets.elVp.innerHeight(),t=n.sets.window.innerHeight(),i=void 0!==window.screen&&void 0!==window.screen.height?Math.max(window.screen.height,n.sets.window.height()):n.sets.window.height(),l=n.sets.window.outerWidth(),o=n.sets.elUl.find("li img");null!=n.sets.offMobileSel&&e(n.sets.offMobileSel).length>0&&(n.sets.offMobileHeight=e(n.sets.offMobileSel).innerHeight());var r=t-n.sets.offMobileHeight;n.sets.outerMobileHeight==i&&n.sets.outerMobileWidth==l||(n.sets.outerMobileHeight=i,n.sets.outerMobileWidth=l,s>=r&&e(".bullets-wrap").is(":hidden")?o.css({width:"auto",height:r+"px",margin:"0 auto",float:"none"}):void 0!==o.attr("style")&&""!=o.attr("style")&&o.attr("style",""))}},this.setCssClasses=function(){n.sets.elVp.css({overflow:"hidden",position:"relative",width:n.element.innerWidth(),height:n.sets.elLi.innerHeight()<5?n.element.closest(".csc-default").innerHeight()+n.sets.offsetVp:n.sets.elLi.innerHeight()+n.sets.offsetVp}),n.sets.fading?n.sets.elLi.css({float:"none",position:"absolute",top:0,left:0}):(n.sets.useRealWidth||n.sets.elUl.find("li").css({width:n.sets.elVp.css("width")}),n.sets.liWidth=n.sets.elLi.innerWidth(),n.sets.elUl.addClass(n.sets.clearfix),n.sets.elUl.css({width:n.sets.elUl.find("li").length*(n.sets.elLi.innerWidth()+parseInt(n.sets.elUl.find("li").css("margin-right"))+parseInt(n.sets.elUl.find("li").css("margin-left")))}))},this.buildMirrored=function(){if(n.sets.cntElements=n.sets.elUl.find("li").length,n.sets.fading)n.sets.elUl.css({"white-space":"normal",position:"auto"}),n.sets.elUl.find("li").hide(),n.sets.elUl.find("li").first().show();else if(n.sets.cntElements>1){if(!n.sets.lastIsFirst){var e=n.sets.elUl.find("li").first().clone(),s=n.sets.elUl.find("li").last().clone();e.addClass("mirrored first"),e.attr("id","joSlideM-"+n.sets.cntElements),s.addClass("mirrored last"),s.attr("id","joSlideM-0")}null==n.sets.liWidth&&(n.sets.liWidth=n.sets.elUl.find("li").innerWidth()+parseInt(n.sets.elUl.find("li").css("margin-right"))+parseInt(n.sets.elUl.find("li").css("margin-left"))),null!=n.sets.liWidthSel&&(n.sets.liWidth=n.sets.elUl.find("li").parents(n.sets.liWidthSel).innerWidth()+parseInt(n.sets.elUl.find("li").css("margin-right"))+parseInt(n.sets.elUl.find("li").css("margin-left"))),n.sets.lastIsFirst||n.sets.elUl.prepend(s),n.sets.elUl.css({left:-n.sets.liWidth}),n.sets.lastIsFirst||n.sets.elUl.append(e)}if(n.sets.elUl.find("li a").first().addClass("active"),n.setCssClasses(),n.element.bind("touchstart",function(e){n.sets.initialX=e.originalEvent.changedTouches[0].pageX}),n.element.bind("touchend touchcancel",function(e){n.sets.touchDirection>0&&n.element.find(".prev").trigger("click"),n.sets.touchDirection<0&&n.element.find(".next").trigger("click"),n.sets.initialX=null,n.sets.touchDirection=null}),n.element.bind("touchmove",function(e){null!=n.sets.initialX&&(n.sets.touchDirection=e.originalEvent.changedTouches[0].pageX-n.sets.initialX,Math.abs(n.sets.touchDirection)>80?e.preventDefault():n.sets.touchDirection=0)}),0!=n.sets.changeHeightArrows){var t=parseInt(n.sets.elLi.height())+n.sets.changeHeightArrows;n.sets.elBtnP.height(t),n.sets.elBtnN.height(t)}},this.setLastIsFirst=function(e){e>0&&(n.sets.slideFn.before=function(){n.sets.ulPos=-n.sets.liWidth,n.sets.slideFn.before=function(){}},n.sets.slideFn.after=function(){n.sets.elUl.find("li").last().after(n.sets.elUl.find("li").first()),n.sets.elUl.css("left",parseInt(n.sets.elUl.css("left"))+n.sets.liWidth),n.sets.ulPos=0,n.sets.activeLi=-1,n.setElementActive(n.sets.activeLi+1),n.sets.slideFn.after=function(){}}),e<0&&(n.sets.slideFn.before=function(){n.sets.elUl.find("li").first().before(n.sets.elUl.find("li").last()),n.sets.elUl.css("left",-n.sets.liWidth),n.sets.ulPos=parseInt(n.sets.elUl.css("left"))+n.sets.liWidth,n.sets.slideFn.before=function(){}},n.sets.slideFn.after=function(){n.sets.activeLi=0,n.setElementActive(n.sets.activeLi),n.sets.slideFn.after=function(){}})},this.lookForActive=function(){n.sets.activeLi=n.sets.elUl.find("li.active").index(),n.sets.activeLi<0&&(n.sets.activeLi=0),n.setElementActive(n.sets.activeLi),n.sets.ulPos=-n.sets.activeLi*n.sets.liWidth,n.sets.elUl.css({left:n.sets.ulPos}),n.sets.activeLi--},this.slidePrStage=function(s){if(s.preventDefault(),n.stopAutoSlider(),!n.sets.isAnimated){n.sets.isAnimated=!0,n.sets.liWidth=n.sets.elUl.find("li").first().innerWidth()+parseInt(n.sets.elUl.find("li").css("margin-right"))+parseInt(n.sets.elUl.find("li").css("margin-left"));var t=1;n.sets.elUl.length>0&&(e(this).hasClass("prev")&&(t=-1),n.sets.activeLi+=t,n.setElementActive(n.sets.activeLi+1),n.sets.fading?n.fadeAnimation():(n.sets.ulPos=-(n.sets.activeLi+1)*n.sets.liWidth,n.sets.lastIsFirst&&n.setLastIsFirst(t),n.slideAnimation()))}},this.slideToPrStage=function(s){s.preventDefault(),n.stopAutoSlider();var t=e(this).parents("li");n.sets.isAnimated||(n.sets.isAnimated=!0,n.sets.liWidth=n.sets.elUl.find("li").first().innerWidth()+parseInt(n.sets.elUl.find("li").css("margin-right"))+parseInt(n.sets.elUl.find("li").css("margin-left")),n.sets.elUl.length>0&&(n.sets.activeLi=n.sets.elBlUl.find("li").index(t),n.setElementActive(n.sets.activeLi+1),n.sets.fading?n.fadeAnimation():(n.sets.ulPos=-(n.sets.activeLi+1)*n.sets.liWidth,n.slideAnimation())))},this.slideByTimer=function(){n.sets.isAnimated||(n.sets.isAnimated=!0,n.sets.elUl.length>0&&(++n.sets.activeLi>n.sets.cntElements&&(n.sets.activeLi=0),n.setElementActive(n.sets.activeLi+1),n.sets.fading?n.fadeAnimation():(n.sets.liWidth=n.sets.elUl.find("li").first().innerWidth()+parseInt(n.sets.elUl.find("li").css("margin-right"))+parseInt(n.sets.elUl.find("li").css("margin-left")),n.sets.ulPos=-(n.sets.activeLi+1)*n.sets.liWidth,n.slideAnimation())))},this.slideAnimation=function(){n.sets.slideFn.before(),n.sets.elUl.animate({left:n.sets.ulPos},{duration:n.sets.speed,start:function(){"function"==typeof n.sets.fnStart&&n.sets.fnStart()},step:function(){},complete:function(){n.sets.isAnimated=!1,n.sets.slideFn.after(),!n.sets.lastIsFirst&&n.sets.activeLi<0&&(n.sets.elUl.css({left:-n.sets.liWidth*n.sets.cntElements}),n.sets.activeLi=n.sets.cntElements-1,n.setElementActive(n.sets.activeLi+1)),!n.sets.lastIsFirst&&n.sets.activeLi>=n.sets.cntElements&&(n.sets.elUl.css({left:-n.sets.liWidth}),n.sets.activeLi=0,n.setElementActive(n.sets.activeLi+1)),null!=n.sets.elBlUl&&n.setBullet(n.sets.activeLi),null!=n.sets.iScroll&&n.sets.iScroll.refresh(),"function"==typeof n.sets.fnComplete&&n.sets.fnComplete(),n.startAutoSlider()}})},this.fadeAnimation=function(){var e=n.sets.activeLi;e>=n.sets.cntElements&&(e=0),n.sets.elUl.find("li").hide(),n.sets.elUl.find("li").eq(e).fadeIn({duration:n.sets.speed,start:function(){"function"==typeof n.sets.fnStart&&n.sets.fnStart()},step:function(){},complete:function(){n.sets.isAnimated=!1,n.sets.activeLi<0&&(n.sets.activeLi=n.sets.cntElements-1),n.sets.activeLi>=n.sets.cntElements&&(n.sets.activeLi=0),n.setElementActive(n.sets.activeLi),null!=n.sets.elBlUl&&n.setBullet(n.sets.activeLi),"function"==typeof n.sets.fnComplete&&n.sets.fnComplete(),n.startAutoSlider(),null!=n.sets.iScroll&&n.sets.iScroll.refresh()}})},this.setBullet=function(s){n.sets.elBlUl.find("li a.active").removeClass("active"),e(n.sets.elBlUl.find("li").get(s)).find("a").addClass("active")},this.setElementActive=function(s){n.sets.elUl.find("li").removeClass("active"),e(n.sets.elUl.find("li")[s]).addClass("active")},this.startAutoSlider=function(){n.sets.autoSlider&&null==n.sets.thisTimer&&(n.sets.thisTimer=setInterval(function(){n.slideByTimer()},n.sets.intervalTime))},this.stopAutoSlider=function(){clearInterval(n.sets.thisTimer),n.sets.thisTimer=null},this.isScrolling=function(s){var t=!1,i=!1,l=!1,o=!1,r=n.sets.window;i=!(parseInt(n.element.css("left"))>r.width()+n.sets.document.scrollLeft()),t=!(parseInt(n.element.css("left"))+parseInt(n.element.css("width"))<=n.sets.document.scrollLeft()),void 0!==n.sets.glblsets&&void 0!==n.sets.glblsets.isMobile&&n.sets.glblsets.isMobile?(l=!(parseInt(n.element.position().top)+parseInt(n.element.innerHeight())<=-parseInt(e("#scroller").offset().top)),o=!(parseInt(n.element.position().top)>n.sets.window.height()+-parseInt(e("#scroller").offset().top))):(l=!(parseInt(n.element.offset().top)+parseInt(n.element.innerHeight())<=n.sets.document.scrollTop()),o=!(parseInt(n.element.offset().top)>n.sets.window.height()+n.sets.document.scrollTop())),1==t&&1==i&&1==l&&1==o?null==n.sets.thisTimer&&n.sliderUpdate():null!=n.sets.thisTimer&&n.stopAutoSlider()},this.windowResize=function(){n.setLowerHeightForMobile(),n.sliderUpdate()},this.sliderUpdate=function(e){n.stopAutoSlider(),n.sets.fading||n.sets.cntElements>1&&(n.setCssClasses(),n.lookForActive()),"function"==typeof e&&e(),n.startAutoSlider(),null!=n.sets.iScroll&&n.sets.iScroll.refresh()},this.imgLoad=function(s,t){return s.each(function(){t&&(this.complete||e(this).height()>0?t():e(this).on("load",function(){t()}))})},this.init()}var t={useRealWidth:!0,liWidth:null,liWidthSel:null,speed:1e3,selVp:".viewport",offsetVp:0,selUl:"ul",selLi:"li",selBl:!1,selBlUl:"ul.slideshow.bullets",selBtnP:".joSliderButtons.prev",selBtnN:".joSliderButtons.next",changeHeightArrows:0,clearfix:"joClearfix",ulPos:null,intervalTime:8e3,btnsBl:"li a",fading:!1,iScroll:null,autoSlider:!0,type:null,setLowerHeightForMobile:0,offMobileHeight:0,offMobileSel:null,fnStart:null,fnComplete:null,lastIsFirst:!0,fnInit:null},i={window:e(window),document:e(document),activeLi:0,cntElements:0,isAnimated:!1,thisTimer:null,initialX:null,touchDirection:0,isSliding:!1,elVp:null,elUl:null,elLi:null,elBlUl:null,outerMobileHeight:0,outerMobileWidth:0,direction:0,slideFn:{before:function(){},after:function(){}}};e.fn.joSlider=function(t){return this.each(function(){e.data(this,"plugin_joSlider")||e.data(this,"plugin_joSlider",new s(this,t))})}});